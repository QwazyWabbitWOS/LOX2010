<html>
<head>
<title>Quake 2 LOX Mod - Server Setup for Windows</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<META name="description" content="Quake 2 LOX mod documentation and information.">
<META name="keywords" content="Quake 2, LOX, LOX mod, modification, documentation, LOX documentation, docs, readme">
<style type="text/css">
<!--
body 				{  font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 12px; font-style: normal; line-height: normal; font-weight: normal; font-variant: normal; text-transform: none; color: #FFFFFF; text-decoration: none; background-attachment: fixed; background-color: #FFFFFF}
p,blockquote,li,ol,ul,td 	{  font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 12px; font-style: normal; line-height: normal; font-weight: normal; font-variant: normal; text-transform: none; color: #000000; text-decoration: none}
a 				{  font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 12px; font-style: normal; line-height: normal; font-weight: bold; font-variant: normal; text-transform: none; color: #999999; text-decoration: none}
a:hover 			{  font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 12px; font-style: normal; line-height: normal; font-weight: bold; font-variant: normal; text-transform: none; color: #00CC33; text-decoration: underline overline}
-->
</style>
</head>
<body marginwidth="0" marginheight="0" leftmargin="0" topmargin="0" bgcolor="#FFFFFF">
<table border="0">
<tr><td>
<img src="images/loxdocmain2.gif" border="0">
</td>&nbsp;&nbsp;
<td valign="center" align="middle">
<img src="images/loxdocmain.gif" border="0">
</td>
</tr>
</table>
<table border="0" align="left">
<tr><td>
<b>Main Menu</b>:<br>
<hr width="15%" size="1" align="center" noshade>
<a href="index.htm">Home</a><br>
<a href="installation.htm">Installation</a><br><a href="modes.htm">Game Modes</a><br>
<a href="weapons.htm">Weapons</a><br>
<a href="features.htm">Features</a><br>
<a href="grenades.htm">Grenades</a><br>
<a href="angels.htm">Angels</a><br>
<a href="armour.htm">Armour</a><br>
<hr width="15%" size="1" align="center" noshade>
<a href="history.htm">History</a><br>
<a href="changelog.htm">Changelog</a><br>
<hr width="15%" size="1" align="center" noshade>
Server:<br>
<a href="server_win.htm">Windows</a><br>
<a href="server_linux.htm">Linux</a><br><a href="server_cvars.htm">Server Cvars</a><br><hr width="15%" size="1" align="center" noshade>Entities:<br><a href="ent.htm">.ent file How-To</a><br><a href="offworldtransport.htm">OffWorld Transport</a><br>
<hr width="15%" size="1" align="center" noshade>
</td>
<table width="80%" border="0" cellspacing="2" cellpadding="4" align="center">
  <tr> 
    <td colspan="2" valign="top">
	<img src="images/server_win.jpg" width="230" height="195">
	</td>
    <td valign="top" width="100%">
      <b>Windows Server Setup</b><br>
	<i>written by QwazyWabbit&lt;WOS&gt;</i>
<p>This tutorial describes how to setup and publish a LOX server on the Windows operating system. I use a desktop shortcut to start a batch file that I keep in my c:\quake2 directory. The shortcut starts the batch file and the batch file starts quake2 or r1q2 as the case may be. I prefer to run the <a href="http://www.r1ch.net/stuff/r1q2/" target="_blank">r1q2</a> engine now because of it's stability, security and network enhancements.</p>

<p>Create a batch file and put the following lines in it:</p>
<font color="#FF9900" size="-2">
<pre>
cd \quake2<br>
start r1q2 +set port 27910 +set dedicated 1 +set game lox +set deathmatch 1 +set maplist 1 +exec server.cfg
</pre>
</font>
<P>The <b>"+set port 27910"</b> line is optional if you are going to use the default 27910 port for your server.</p>

<p>The <b>"+exec server.cfg"</b> finishes the configuration of your server. This file MUST exist in the LOX folder, in this case it's in c:\quake2\lox.</p>

<p>Here are some sample settings for your server config:</p>
<font color="#FF9900">
<pre>
//
// This is a sample serverconfig.cfg file for dedicated LOX servers.

set public 1  //publicly listed
set logfile 3 // log and append qconsole.log
set deathmatch 1 // it's a deathmatch server
//set logarstats 1 // log ARSG stats (optional)

//this defines some master servers so GS can find it
//other masters exist, this list is not definitive
setmaster q2master.planetquake.com master0.gamespy.com satan.idsoftware.com

set hostname "QwazyWabbits LOX 1.12.8 Test"

// set ServerAdmin "<QwazyWabbit>" s
// set email "<windowmeister@hotmail.com>" s
// set webpage "<webpage address goes here>" s

set rcon_password yourrconpassword
set maxtrackers 3   //LOX defaults to 3
set maxlasertrips 4   //Game default is 6
//set dmflags 340      // see the docs.
set dmflags 1057108
set maxclients 26
set maxspectators 6
set kamifrozen 1
set fraglimit 20
set timelimit 25
set daynighttime 1
set weaponban 0x0000 //see the docs
set featureban 0
set fragban 0
set loxweaponban 0
set loxsweeperban 0
set loxgrenadeban 0
set loxfeatureban 0
set loxarmorban 0
set loxtrackerban 0
set maplist 1
set cl_maxfps 60
set maxrate 15000
map base1 //always the last command
</pre>
</font>
<p>Some of these settings are shown just to illustrate basics, you'll need to determine your own settings according to your needs and the version of LOX that you are running. The very last command in the server.cfg file MUST be the map command to get it to start your first map.</p>

<p>You will also need to create a <b>maplist.txt</b> file in the LOX folder with a list of the maps you want the server to rotate through. This list must be a list of the map file names without the .BSP extensions.</p>

<p>DEDICATED servers keep all their map and texture files in the <b>\quake2\baseq2</b> heirarchy. This is very important. CLIENT machines download maps and skins and textures into the MOD folders so you must copy these directories into the \quake\baseq2\ folder in order to make them available to the dedicated server so it can download them to clients as needed. This must be done carefully because some mods use different versions of the maps and you can run into conflicts in maps if you are mixing client/server and mod environments. It can be easier to maintain a separate server machine with all it's files in a consistent state than to run the dedicated server on your client machine, so if you can afford to keep another computer going, this is highly recommended. Server hardware requirements are much less than client requirements because they don't need graphics processing. I have successfully run multiple Q2 servers on 400MHz machines with excellent server performance.</p>

<p>That's about it, you should be able to start your server and connect to it on the local LAN with your client. The server will run in a console window when running the quake2.exe engine and r1q2.exe will run in a split-pane window with a scrolling pane for the console text and a smaller pane for your console commands.</p>

<ul><b>WAN Access:</b></ul>
<p>In order for your server to become visible to users on the Internet you must open the UDP port that you defined for Quake2 above. Usually this is 27910, but it can be anywhere. The customary range for quake2 servers is 27910 thru 27915 or even 27920. Router configurations vary widely so I will not attempt to give detailed instructions. Your goal is to open inbound WAN UDP port 27910 on the router and forward that port to the LAN IP address of your server computer. It is not neccessary to forward TCP on this port. The server computer must also have its LAN IP address statically defined so that if you reboot your server computer it won't be reassigned a new LAN IP address by the DHCP server (if any) in your router or local network.</p>

<p>If you have configured your server and router correctly, All Seeing Eye, Gamespy and outsiders will be able to ping, query status and connect to your server given it's WAN IP address and the port number. You can also test this yourself by connecting to the server from your client by connecting to the WAN address. If your router is correctly configured it will allow your client to connect to the server as though you were "outside, looking in".</p>

<p>You can add the desktop shortcut to your Startup folder to make the server start at Windows start or start it manually as needed. Setting your quake2 server to run as a Windows Service will be covered in another topic.</p>

  </tr>
</table>
<hr width="70%" size="1" align="center" noshade>
<table width="80%" border="0" cellspacing="0" cellpadding="4" align="center">
  <tr> 
    <td width="20%"></td>
    <td align="center" width="50%">Quake 2 LOX Docs. - <a href="http://www.clanwos.org">http://www.clanwos.org</a></td>
    <td align="right" width="20%"></td>
  </tr>
</table>
</tr>
</table>
</body>
</html>

